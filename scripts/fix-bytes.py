#!/usr/bin/env python3
import sys

files = [
    'modulo6_dashboard_aluno.html',
    'modulo6_dashboard_producao.html',
    'modulo6_framework_interativo.html',
    'framework_gestao_dados_completo.html'
]

# Usando unicode code points para evitar problemas
emoji_map = [
    (b'\xc3\xb0\xc5\xb8\xc5\x92\xe2\x80\x99', b'\xf0\x9f\x8c\x99'),  # ğŸŒ™
    (b'\xc3\xb0\xc5\xb8\xe2\x80\x9c\xc5\xa0', b'\xf0\x9f\x93\x8a'),  # ğŸ“Š
    (b'\xc3\xb0\xc5\xb8\xe2\x80\x9c\xc5\xa1', b'\xf0\x9f\x93\x9a'),  # ğŸ“š
    (b'\xc3\xb0\xc5\xb8\xe2\x80\x9c\xe2\x80\x9a', b'\xf0\x9f\x93\x82'),  # ğŸ“‚
    (b'\xc3\xb0\xc5\xb8\xe2\x80\x98\xc2\xaa', b'\xf0\x9f\x92\xaa'),  # ğŸ’ª
    (b'\xc3\xb0\xc5\xb8\xe2\x80\x98\xc2\xa4', b'\xf0\x9f\x91\xa4'),  # ğŸ‘¤
    (b'\xc3\xb0\xc5\xb8\xe2\x80\x9c\xe2\x80\xa6', b'\xf0\x9f\x93\x85'),  # ğŸ“…
    (b'\xc3\xb0\xc5\xb8\xc5\xa0\xc2\xaf', b'\xf0\x9f\x8e\xaf'),  # ğŸ¯
    (b'\xc3\xb0\xc5\xb8\xe2\x80\x9c\xc2\xb9', b'\xf0\x9f\x94\xb9'),  # ğŸ”¹
    (b'\xc3\xb0\xc5\xb8\xe2\x80\x9c\xc5\x93', b'\xf0\x9f\x93\x9d'),  # ğŸ“
    (b'\xc3\xb0\xc5\xb8\xc5\xa0\xc2\xac', b'\xf0\x9f\x8e\xac'),  # ğŸ¬
    (b'\xc3\xb0\xc5\xb8\xe2\x80\x9c\xe2\x80\x8b', b'\xf0\x9f\x93\x8b'),  # ğŸ“‹
    (b'\xc3\xb0\xc5\xb8\xe2\x80\x9c\xc2\xba', b'\xf0\x9f\x94\xba'),  # ğŸ”º
    (b'\xc3\xb0\xc5\xb8\xc2\x86', b'\xf0\x9f\x8f\x86'),  # ğŸ†
    (b'\xc3\xb0\xc5\xb8\xe2\x80\x9c\xc2\xa5', b'\xf0\x9f\x94\xa5'),  # ğŸ”¥
    (b'\xc3\xb0\xc5\xb8\xe2\x80\x9c\xe2\x80\x9e', b'\xf0\x9f\x94\x84'),  # ğŸ”„
    (b'\xc3\xb0\xc5\xb8\xe2\x80\x9c\xcb\x86', b'\xf0\x9f\x93\x88'),  # ğŸ“ˆ
    (b'\xc3\xb0\xc5\xb8\xe2\x80\x98\xc2\xbc', b'\xf0\x9f\x92\xbc'),  # ğŸ’¼
    (b'\xc3\xb0\xc5\xb8\xc2\xa4\xe2\x80\x93', b'\xf0\x9f\xa4\x96'),  # ğŸ¤–
    (b'\xc3\xb0\xc5\xb8\xc5\xa0\xe2\x80\Â°', b'\xf0\x9f\x8e\x89'),  # ğŸ‰
    (b'\xc3\xb0\xc5\xb8\xc5\xa1\xe2\x82\xac', b'\xf0\x9f\x9a\x80'),  # ğŸš€
    (b'\xc3\xb0\xc5\xb8\xe2\x80\x9c\xe2\x80\x93', b'\xf0\x9f\x93\x96'),  # ğŸ“–
]

print('ğŸ”§ Corrigindo encoding em nÃ­vel de bytes...\n')

import os
os.chdir('/home/taina/projects/educational-platform/education-lab-gestao-dados/assets/html')

for filename in files:
    with open(filename, 'rb') as f:
        data = f.read()

    original_size = len(data)

    # Aplicar correÃ§Ãµes em nÃ­vel de bytes
    for old_bytes, new_bytes in emoji_map:
        data = data.replace(old_bytes, new_bytes)

    # CorreÃ§Ãµes de texto simples
    data = data.replace(b'\xc3\xa0\xc5\xa1ltima', 'Ãšltima'.encode('utf-8'))

    if len(data) != original_size or data != open(filename, 'rb').read():
        with open(filename, 'wb') as f:
            f.write(data)
        print(f'âœ… {filename}')
    else:
        print(f'â­ï¸  {filename} (sem mudanÃ§as)')

print('\nâœ¨ CorreÃ§Ã£o concluÃ­da!')
